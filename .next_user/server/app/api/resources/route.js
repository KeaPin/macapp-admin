/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/resources/route";
exports.ids = ["app/api/resources/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fresources%2Froute&page=%2Fapi%2Fresources%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresources%2Froute.ts&appDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fresources%2Froute&page=%2Fapi%2Fresources%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresources%2Froute.ts&appDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_tink_Desktop_TinkProject_macapp_admin_src_app_api_resources_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/resources/route.ts */ \"(rsc)/./src/app/api/resources/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_tink_Desktop_TinkProject_macapp_admin_src_app_api_resources_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_tink_Desktop_TinkProject_macapp_admin_src_app_api_resources_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/resources/route\",\n        pathname: \"/api/resources\",\n        filename: \"route\",\n        bundlePath: \"app/api/resources/route\"\n    },\n    resolvedPagePath: \"/Users/tink/Desktop/TinkProject/macapp-admin/src/app/api/resources/route.ts\",\n    nextConfigOutput,\n    userland: _Users_tink_Desktop_TinkProject_macapp_admin_src_app_api_resources_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyZXNvdXJjZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJlc291cmNlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJlc291cmNlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRpbmslMkZEZXNrdG9wJTJGVGlua1Byb2plY3QlMkZtYWNhcHAtYWRtaW4lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdGluayUyRkRlc2t0b3AlMkZUaW5rUHJvamVjdCUyRm1hY2FwcC1hZG1pbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDMkI7QUFDeEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGLHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy90aW5rL0Rlc2t0b3AvVGlua1Byb2plY3QvbWFjYXBwLWFkbWluL3NyYy9hcHAvYXBpL3Jlc291cmNlcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmVzb3VyY2VzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmVzb3VyY2VzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZXNvdXJjZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvdGluay9EZXNrdG9wL1RpbmtQcm9qZWN0L21hY2FwcC1hZG1pbi9zcmMvYXBwL2FwaS9yZXNvdXJjZXMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fresources%2Froute&page=%2Fapi%2Fresources%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresources%2Froute.ts&appDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/resources/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/resources/route.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var _opennextjs_cloudflare__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @opennextjs/cloudflare */ \"(rsc)/./node_modules/@opennextjs/cloudflare/dist/api/index.js\");\n/* harmony import */ var _server_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/db */ \"(rsc)/./src/server/db.ts\");\n/* harmony import */ var _server_validators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/validators */ \"(rsc)/./src/server/validators.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_db__WEBPACK_IMPORTED_MODULE_1__]);\n_server_db__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nasync function GET(req) {\n    const { env } = (0,_opennextjs_cloudflare__WEBPACK_IMPORTED_MODULE_0__.getCloudflareContext)();\n    const searchParams = req.nextUrl.searchParams;\n    const pageParam = Number(searchParams.get(\"page\") ?? \"\");\n    const pageSizeParam = Number(searchParams.get(\"pageSize\") ?? \"\");\n    const qRaw = (searchParams.get(\"q\") ?? \"\").trim();\n    const statusFilter = searchParams.get(\"status\"); // NORMAL, VOID 或 null(查看全部)\n    const page = Number.isFinite(pageParam) && pageParam > 0 ? Math.floor(pageParam) : 1;\n    const pageSize = Number.isFinite(pageSizeParam) && pageSizeParam > 0 ? Math.min(Math.floor(pageSizeParam), 100) : 10;\n    const offset = (page - 1) * pageSize;\n    const idParam = Number(searchParams.get(\"id\") ?? \"\");\n    // Detail by id\n    if (Number.isInteger(idParam) && idParam > 0) {\n        const detail = await (0,_server_db__WEBPACK_IMPORTED_MODULE_1__.runQuery)(env, `\n      WITH rl AS (\n        SELECT DISTINCT ON (resource_id)\n          resource_id,\n          link\n        FROM resource_link\n        ORDER BY resource_id, update_time DESC NULLS LAST\n      ),\n      rc AS (\n        SELECT DISTINCT ON (trim(resource_id))\n          trim(resource_id) AS rid,\n          trim(category_id) AS cid\n        FROM resource_category\n        ORDER BY trim(resource_id), create_time DESC NULLS LAST\n      ),\n      u AS (\n        SELECT \n          r.id::double precision            AS id,\n          r.title                           AS title,\n          r.url                             AS url,\n          r.category_id::double precision   AS category_id,\n          r.description                     AS description,\n          r.status                          AS status\n        FROM resources r\n        UNION ALL\n        SELECT \n          (re.id)::double precision                                            AS id,\n          re.name                                                              AS title,\n          COALESCE(rl.link, re.official_site, re.detail_url, '#')              AS url,\n          CASE WHEN rc.cid ~ '^[0-9]+$' THEN (rc.cid)::double precision ELSE NULL END AS category_id,\n          COALESCE(re.synopsis, re.description)                                 AS description,\n          COALESCE(re.status, 'NORMAL')                                         AS status\n        FROM resource re\n        LEFT JOIN rl ON rl.resource_id = re.id\n        LEFT JOIN rc ON rc.rid = re.id\n      )\n      SELECT id, title, url, category_id, description, status\n      FROM u\n      WHERE id = $1\n      LIMIT 1\n      `, [\n            idParam\n        ]);\n        const row = detail.rows[0];\n        if (!row) return new Response(null, {\n            status: 404\n        });\n        return Response.json(row);\n    }\n    // 构建查询条件\n    const whereConditions = [];\n    const queryParams = [];\n    if (qRaw) {\n        whereConditions.push(`(title ILIKE $${queryParams.length + 1} OR category_name ILIKE $${queryParams.length + 1})`);\n        queryParams.push(`%${qRaw}%`);\n    }\n    if (statusFilter && (statusFilter === 'NORMAL' || statusFilter === 'VOID')) {\n        whereConditions.push(`status = $${queryParams.length + 1}`);\n        queryParams.push(statusFilter);\n    }\n    const whereClause = whereConditions.length > 0 ? `WHERE ${whereConditions.join(' AND ')}` : \"\";\n    const limitParam = queryParams.length + 1;\n    const offsetParam = queryParams.length + 2;\n    queryParams.push(pageSize, offset);\n    const itemsResult = await (0,_server_db__WEBPACK_IMPORTED_MODULE_1__.runQuery)(env, `\n    WITH rl AS (\n      SELECT DISTINCT ON (resource_id)\n        resource_id,\n        link\n      FROM resource_link\n      ORDER BY resource_id, update_time DESC NULLS LAST\n    ),\n    rc AS (\n      SELECT DISTINCT ON (trim(resource_id))\n        trim(resource_id) AS rid,\n        trim(category_id) AS cid\n      FROM resource_category\n      ORDER BY trim(resource_id), create_time DESC NULLS LAST\n    ),\n    u AS (\n      SELECT \n        r.id::double precision            AS id,\n        r.title                           AS title,\n        r.url                             AS url,\n        r.category_id::double precision   AS category_id,\n        r.status                          AS status\n      FROM resources r\n      UNION ALL\n      SELECT \n        (re.id)::double precision                                            AS id,\n        re.name                                                              AS title,\n        COALESCE(rl.link, re.official_site, re.detail_url, '#')              AS url,\n        CASE WHEN rc.cid ~ '^[0-9]+$' THEN (rc.cid)::double precision ELSE NULL END AS category_id,\n        COALESCE(re.status, 'NORMAL')                                         AS status\n      FROM resource re\n      LEFT JOIN rl ON rl.resource_id = re.id\n      LEFT JOIN rc ON rc.rid = re.id\n    ),\n    u2 AS (\n      SELECT u.*, c.name AS category_name\n      FROM u\n      LEFT JOIN categories c ON c.id = u.category_id\n    ),\n    s AS (\n      SELECT id, title, category_name, url, status, COUNT(*) OVER() AS total\n      FROM u2\n      ${whereClause}\n      ORDER BY id DESC\n    )\n    SELECT \n      id,\n      title,\n      category_name,\n      status,\n      CASE \n        WHEN url ~* '^https?://' THEN 'https://www.google.com/s2/favicons?domain=' || regexp_replace(url, '^(?:https?:\\\\/\\\\/)?([^\\\\/\\\\?#]+).*$', '\\\\1') || '&sz=64'\n        ELSE NULL\n      END AS icon,\n      total\n    FROM s\n    LIMIT $${limitParam} OFFSET $${offsetParam}\n    `, queryParams);\n    let total;\n    if (itemsResult.rows.length > 0) {\n        total = Number(itemsResult.rows[0].total);\n    } else {\n        // 构建统计查询条件\n        const countWhereConditions = [];\n        const countParams = [];\n        if (qRaw) {\n            countWhereConditions.push(`(title ILIKE $${countParams.length + 1} OR category_name ILIKE $${countParams.length + 1})`);\n            countParams.push(`%${qRaw}%`);\n        }\n        if (statusFilter && (statusFilter === 'NORMAL' || statusFilter === 'VOID')) {\n            countWhereConditions.push(`status = $${countParams.length + 1}`);\n            countParams.push(statusFilter);\n        }\n        const countWhereClause = countWhereConditions.length > 0 ? `WHERE ${countWhereConditions.join(' AND ')}` : \"\";\n        const countResult = await (0,_server_db__WEBPACK_IMPORTED_MODULE_1__.runQuery)(env, `\n      WITH rl AS (\n        SELECT DISTINCT ON (resource_id)\n          resource_id,\n          link\n        FROM resource_link\n        ORDER BY resource_id, update_time DESC NULLS LAST\n      ),\n      rc AS (\n        SELECT DISTINCT ON (trim(resource_id))\n          trim(resource_id) AS rid,\n          trim(category_id) AS cid\n        FROM resource_category\n        ORDER BY trim(resource_id), create_time DESC NULLS LAST\n      ),\n      u AS (\n        SELECT \n          r.id::double precision            AS id,\n          r.title                           AS title,\n          r.url                             AS url,\n          r.category_id::double precision   AS category_id,\n          r.status                          AS status\n        FROM resources r\n        UNION ALL\n        SELECT \n          (re.id)::double precision                                            AS id,\n          re.name                                                              AS title,\n          COALESCE(rl.link, re.official_site, re.detail_url, '#')              AS url,\n          CASE WHEN rc.cid ~ '^[0-9]+$' THEN (rc.cid)::double precision ELSE NULL END AS category_id,\n          COALESCE(re.status, 'NORMAL')                                         AS status\n        FROM resource re\n        LEFT JOIN rl ON rl.resource_id = re.id\n        LEFT JOIN rc ON rc.rid = re.id\n      ),\n      u2 AS (\n        SELECT u.*, c.name AS category_name\n        FROM u\n        LEFT JOIN categories c ON c.id = u.category_id\n      )\n      SELECT COUNT(*) AS total FROM u2\n      ${countWhereClause}\n      `, countParams);\n        total = Number(countResult.rows[0]?.total ?? 0);\n    }\n    const items = itemsResult.rows.map(({ total: _t, ...row })=>row);\n    return Response.json({\n        items,\n        total,\n        page,\n        pageSize,\n        q: qRaw,\n        status: statusFilter\n    });\n}\nasync function POST(req) {\n    const body = await req.json().catch(()=>({}));\n    const parsed = _server_validators__WEBPACK_IMPORTED_MODULE_2__.resourceCreateSchema.safeParse(body);\n    if (!parsed.success) {\n        return Response.json({\n            error: parsed.error.flatten()\n        }, {\n            status: 400\n        });\n    }\n    const { env } = (0,_opennextjs_cloudflare__WEBPACK_IMPORTED_MODULE_0__.getCloudflareContext)();\n    const { title, url, categoryId, description, status } = parsed.data;\n    try {\n        const result = await (0,_server_db__WEBPACK_IMPORTED_MODULE_1__.runQuery)(env, `INSERT INTO resources(title, url, category_id, description, status) VALUES($1, $2, $3, $4, $5) RETURNING id`, [\n            title,\n            url,\n            categoryId ?? null,\n            description ?? null,\n            status\n        ]);\n        return Response.json({\n            id: result.rows[0].id\n        }, {\n            status: 201\n        });\n    } catch (e) {\n        const message = e instanceof Error ? e.message : \"Failed\";\n        return Response.json({\n            error: message\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(req) {\n    const body = await req.json().catch(()=>({}));\n    const parsed = _server_validators__WEBPACK_IMPORTED_MODULE_2__.resourceUpdateSchema.safeParse(body);\n    if (!parsed.success) {\n        return Response.json({\n            error: parsed.error.flatten()\n        }, {\n            status: 400\n        });\n    }\n    const { id, title, url, categoryId, description, status } = parsed.data;\n    const { env } = (0,_opennextjs_cloudflare__WEBPACK_IMPORTED_MODULE_0__.getCloudflareContext)();\n    try {\n        const fields = [];\n        const values = [];\n        if (title !== undefined) {\n            fields.push(`title = $${fields.length + 1}`);\n            values.push(title);\n        }\n        if (url !== undefined) {\n            fields.push(`url = $${fields.length + 1}`);\n            values.push(url);\n        }\n        if (categoryId !== undefined) {\n            fields.push(`category_id = $${fields.length + 1}`);\n            values.push(categoryId);\n        }\n        if (description !== undefined) {\n            fields.push(`description = $${fields.length + 1}`);\n            values.push(description);\n        }\n        if (status !== undefined) {\n            fields.push(`status = $${fields.length + 1}`);\n            values.push(status);\n        }\n        if (fields.length === 0) return Response.json({\n            ok: true\n        });\n        values.push(id);\n        await (0,_server_db__WEBPACK_IMPORTED_MODULE_1__.runQuery)(env, `UPDATE resources SET ${fields.join(\", \")}, updated_at = now() WHERE id = $${values.length}`, values);\n        return Response.json({\n            ok: true\n        });\n    } catch (e) {\n        const message = e instanceof Error ? e.message : \"Failed\";\n        return Response.json({\n            error: message\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(req) {\n    const { searchParams } = new URL(req.url);\n    const id = Number(searchParams.get(\"id\"));\n    if (!Number.isInteger(id) || id <= 0) {\n        return Response.json({\n            error: \"invalid id\"\n        }, {\n            status: 400\n        });\n    }\n    const { env } = (0,_opennextjs_cloudflare__WEBPACK_IMPORTED_MODULE_0__.getCloudflareContext)();\n    try {\n        await (0,_server_db__WEBPACK_IMPORTED_MODULE_1__.runQuery)(env, `DELETE FROM resources WHERE id = $1`, [\n            id\n        ]);\n        return Response.json({\n            ok: true\n        });\n    } catch (e) {\n        const message = e instanceof Error ? e.message : \"Failed\";\n        return Response.json({\n            error: message\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixPQUFPVTtRQUFRLEdBQUc7WUFBRXBDLFFBQVE7UUFBSTtJQUN6RDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdGluay9EZXNrdG9wL1RpbmtQcm9qZWN0L21hY2FwcC1hZG1pbi9zcmMvYXBwL2FwaS9yZXNvdXJjZXMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldENsb3VkZmxhcmVDb250ZXh0IH0gZnJvbSBcIkBvcGVubmV4dGpzL2Nsb3VkZmxhcmVcIjtcbmltcG9ydCB7IHJ1blF1ZXJ5LCBFbnZXaXRoSHlwZXJkcml2ZSB9IGZyb20gXCJAL3NlcnZlci9kYlwiO1xuaW1wb3J0IHtcbiAgcmVzb3VyY2VDcmVhdGVTY2hlbWEsXG4gIHJlc291cmNlVXBkYXRlU2NoZW1hLFxufSBmcm9tIFwiQC9zZXJ2ZXIvdmFsaWRhdG9yc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgeyBlbnYgfSA9IGdldENsb3VkZmxhcmVDb250ZXh0KCk7XG5cbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zO1xuICBjb25zdCBwYWdlUGFyYW0gPSBOdW1iZXIoc2VhcmNoUGFyYW1zLmdldChcInBhZ2VcIikgPz8gXCJcIik7XG4gIGNvbnN0IHBhZ2VTaXplUGFyYW0gPSBOdW1iZXIoc2VhcmNoUGFyYW1zLmdldChcInBhZ2VTaXplXCIpID8/IFwiXCIpO1xuICBjb25zdCBxUmF3ID0gKHNlYXJjaFBhcmFtcy5nZXQoXCJxXCIpID8/IFwiXCIpLnRyaW0oKTtcbiAgY29uc3Qgc3RhdHVzRmlsdGVyID0gc2VhcmNoUGFyYW1zLmdldChcInN0YXR1c1wiKTsgLy8gTk9STUFMLCBWT0lEIOaIliBudWxsKOafpeeci+WFqOmDqClcbiAgY29uc3QgcGFnZSA9IE51bWJlci5pc0Zpbml0ZShwYWdlUGFyYW0pICYmIHBhZ2VQYXJhbSA+IDAgPyBNYXRoLmZsb29yKHBhZ2VQYXJhbSkgOiAxO1xuICBjb25zdCBwYWdlU2l6ZSA9IE51bWJlci5pc0Zpbml0ZShwYWdlU2l6ZVBhcmFtKSAmJiBwYWdlU2l6ZVBhcmFtID4gMCA/IE1hdGgubWluKE1hdGguZmxvb3IocGFnZVNpemVQYXJhbSksIDEwMCkgOiAxMDtcbiAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIHBhZ2VTaXplO1xuICBjb25zdCBpZFBhcmFtID0gTnVtYmVyKHNlYXJjaFBhcmFtcy5nZXQoXCJpZFwiKSA/PyBcIlwiKTtcblxuICAvLyBEZXRhaWwgYnkgaWRcbiAgaWYgKE51bWJlci5pc0ludGVnZXIoaWRQYXJhbSkgJiYgaWRQYXJhbSA+IDApIHtcbiAgICBjb25zdCBkZXRhaWwgPSBhd2FpdCBydW5RdWVyeTx7XG4gICAgICBpZDogbnVtYmVyO1xuICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgIHVybDogc3RyaW5nO1xuICAgICAgY2F0ZWdvcnlfaWQ6IG51bWJlciB8IG51bGw7XG4gICAgICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgICAgIHN0YXR1czogc3RyaW5nO1xuICAgIH0+KFxuICAgICAgZW52IGFzIHVua25vd24gYXMgRW52V2l0aEh5cGVyZHJpdmUsXG4gICAgICBgXG4gICAgICBXSVRIIHJsIEFTIChcbiAgICAgICAgU0VMRUNUIERJU1RJTkNUIE9OIChyZXNvdXJjZV9pZClcbiAgICAgICAgICByZXNvdXJjZV9pZCxcbiAgICAgICAgICBsaW5rXG4gICAgICAgIEZST00gcmVzb3VyY2VfbGlua1xuICAgICAgICBPUkRFUiBCWSByZXNvdXJjZV9pZCwgdXBkYXRlX3RpbWUgREVTQyBOVUxMUyBMQVNUXG4gICAgICApLFxuICAgICAgcmMgQVMgKFxuICAgICAgICBTRUxFQ1QgRElTVElOQ1QgT04gKHRyaW0ocmVzb3VyY2VfaWQpKVxuICAgICAgICAgIHRyaW0ocmVzb3VyY2VfaWQpIEFTIHJpZCxcbiAgICAgICAgICB0cmltKGNhdGVnb3J5X2lkKSBBUyBjaWRcbiAgICAgICAgRlJPTSByZXNvdXJjZV9jYXRlZ29yeVxuICAgICAgICBPUkRFUiBCWSB0cmltKHJlc291cmNlX2lkKSwgY3JlYXRlX3RpbWUgREVTQyBOVUxMUyBMQVNUXG4gICAgICApLFxuICAgICAgdSBBUyAoXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICByLmlkOjpkb3VibGUgcHJlY2lzaW9uICAgICAgICAgICAgQVMgaWQsXG4gICAgICAgICAgci50aXRsZSAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIHRpdGxlLFxuICAgICAgICAgIHIudXJsICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBUyB1cmwsXG4gICAgICAgICAgci5jYXRlZ29yeV9pZDo6ZG91YmxlIHByZWNpc2lvbiAgIEFTIGNhdGVnb3J5X2lkLFxuICAgICAgICAgIHIuZGVzY3JpcHRpb24gICAgICAgICAgICAgICAgICAgICBBUyBkZXNjcmlwdGlvbixcbiAgICAgICAgICByLnN0YXR1cyAgICAgICAgICAgICAgICAgICAgICAgICAgQVMgc3RhdHVzXG4gICAgICAgIEZST00gcmVzb3VyY2VzIHJcbiAgICAgICAgVU5JT04gQUxMXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAocmUuaWQpOjpkb3VibGUgcHJlY2lzaW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBUyBpZCxcbiAgICAgICAgICByZS5uYW1lICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBUyB0aXRsZSxcbiAgICAgICAgICBDT0FMRVNDRShybC5saW5rLCByZS5vZmZpY2lhbF9zaXRlLCByZS5kZXRhaWxfdXJsLCAnIycpICAgICAgICAgICAgICBBUyB1cmwsXG4gICAgICAgICAgQ0FTRSBXSEVOIHJjLmNpZCB+ICdeWzAtOV0rJCcgVEhFTiAocmMuY2lkKTo6ZG91YmxlIHByZWNpc2lvbiBFTFNFIE5VTEwgRU5EIEFTIGNhdGVnb3J5X2lkLFxuICAgICAgICAgIENPQUxFU0NFKHJlLnN5bm9wc2lzLCByZS5kZXNjcmlwdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBUyBkZXNjcmlwdGlvbixcbiAgICAgICAgICBDT0FMRVNDRShyZS5zdGF0dXMsICdOT1JNQUwnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVMgc3RhdHVzXG4gICAgICAgIEZST00gcmVzb3VyY2UgcmVcbiAgICAgICAgTEVGVCBKT0lOIHJsIE9OIHJsLnJlc291cmNlX2lkID0gcmUuaWRcbiAgICAgICAgTEVGVCBKT0lOIHJjIE9OIHJjLnJpZCA9IHJlLmlkXG4gICAgICApXG4gICAgICBTRUxFQ1QgaWQsIHRpdGxlLCB1cmwsIGNhdGVnb3J5X2lkLCBkZXNjcmlwdGlvbiwgc3RhdHVzXG4gICAgICBGUk9NIHVcbiAgICAgIFdIRVJFIGlkID0gJDFcbiAgICAgIExJTUlUIDFcbiAgICAgIGAsXG4gICAgICBbaWRQYXJhbV1cbiAgICApO1xuICAgIGNvbnN0IHJvdyA9IGRldGFpbC5yb3dzWzBdO1xuICAgIGlmICghcm93KSByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24ocm93KTtcbiAgfVxuXG4gIC8vIOaehOW7uuafpeivouadoeS7tlxuICBjb25zdCB3aGVyZUNvbmRpdGlvbnM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IHF1ZXJ5UGFyYW1zOiB1bmtub3duW10gPSBbXTtcbiAgXG4gIGlmIChxUmF3KSB7XG4gICAgd2hlcmVDb25kaXRpb25zLnB1c2goYCh0aXRsZSBJTElLRSAkJHtxdWVyeVBhcmFtcy5sZW5ndGggKyAxfSBPUiBjYXRlZ29yeV9uYW1lIElMSUtFICQke3F1ZXJ5UGFyYW1zLmxlbmd0aCArIDF9KWApO1xuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCUke3FSYXd9JWApO1xuICB9XG4gIFxuICBpZiAoc3RhdHVzRmlsdGVyICYmIChzdGF0dXNGaWx0ZXIgPT09ICdOT1JNQUwnIHx8IHN0YXR1c0ZpbHRlciA9PT0gJ1ZPSUQnKSkge1xuICAgIHdoZXJlQ29uZGl0aW9ucy5wdXNoKGBzdGF0dXMgPSAkJHtxdWVyeVBhcmFtcy5sZW5ndGggKyAxfWApO1xuICAgIHF1ZXJ5UGFyYW1zLnB1c2goc3RhdHVzRmlsdGVyKTtcbiAgfVxuICBcbiAgY29uc3Qgd2hlcmVDbGF1c2UgPSB3aGVyZUNvbmRpdGlvbnMubGVuZ3RoID4gMCA/IGBXSEVSRSAke3doZXJlQ29uZGl0aW9ucy5qb2luKCcgQU5EICcpfWAgOiBcIlwiO1xuICBjb25zdCBsaW1pdFBhcmFtID0gcXVlcnlQYXJhbXMubGVuZ3RoICsgMTtcbiAgY29uc3Qgb2Zmc2V0UGFyYW0gPSBxdWVyeVBhcmFtcy5sZW5ndGggKyAyO1xuICBxdWVyeVBhcmFtcy5wdXNoKHBhZ2VTaXplLCBvZmZzZXQpO1xuXG4gIGNvbnN0IGl0ZW1zUmVzdWx0ID0gYXdhaXQgcnVuUXVlcnk8e1xuICAgIGlkOiBudW1iZXI7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBjYXRlZ29yeV9uYW1lOiBzdHJpbmcgfCBudWxsO1xuICAgIGljb246IHN0cmluZyB8IG51bGw7XG4gICAgc3RhdHVzOiBzdHJpbmc7XG4gICAgdG90YWw6IHN0cmluZyB8IG51bWJlcjtcbiAgfT4oXG4gICAgZW52IGFzIHVua25vd24gYXMgRW52V2l0aEh5cGVyZHJpdmUsXG4gICAgYFxuICAgIFdJVEggcmwgQVMgKFxuICAgICAgU0VMRUNUIERJU1RJTkNUIE9OIChyZXNvdXJjZV9pZClcbiAgICAgICAgcmVzb3VyY2VfaWQsXG4gICAgICAgIGxpbmtcbiAgICAgIEZST00gcmVzb3VyY2VfbGlua1xuICAgICAgT1JERVIgQlkgcmVzb3VyY2VfaWQsIHVwZGF0ZV90aW1lIERFU0MgTlVMTFMgTEFTVFxuICAgICksXG4gICAgcmMgQVMgKFxuICAgICAgU0VMRUNUIERJU1RJTkNUIE9OICh0cmltKHJlc291cmNlX2lkKSlcbiAgICAgICAgdHJpbShyZXNvdXJjZV9pZCkgQVMgcmlkLFxuICAgICAgICB0cmltKGNhdGVnb3J5X2lkKSBBUyBjaWRcbiAgICAgIEZST00gcmVzb3VyY2VfY2F0ZWdvcnlcbiAgICAgIE9SREVSIEJZIHRyaW0ocmVzb3VyY2VfaWQpLCBjcmVhdGVfdGltZSBERVNDIE5VTExTIExBU1RcbiAgICApLFxuICAgIHUgQVMgKFxuICAgICAgU0VMRUNUIFxuICAgICAgICByLmlkOjpkb3VibGUgcHJlY2lzaW9uICAgICAgICAgICAgQVMgaWQsXG4gICAgICAgIHIudGl0bGUgICAgICAgICAgICAgICAgICAgICAgICAgICBBUyB0aXRsZSxcbiAgICAgICAgci51cmwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIHVybCxcbiAgICAgICAgci5jYXRlZ29yeV9pZDo6ZG91YmxlIHByZWNpc2lvbiAgIEFTIGNhdGVnb3J5X2lkLFxuICAgICAgICByLnN0YXR1cyAgICAgICAgICAgICAgICAgICAgICAgICAgQVMgc3RhdHVzXG4gICAgICBGUk9NIHJlc291cmNlcyByXG4gICAgICBVTklPTiBBTExcbiAgICAgIFNFTEVDVCBcbiAgICAgICAgKHJlLmlkKTo6ZG91YmxlIHByZWNpc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVMgaWQsXG4gICAgICAgIHJlLm5hbWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIHRpdGxlLFxuICAgICAgICBDT0FMRVNDRShybC5saW5rLCByZS5vZmZpY2lhbF9zaXRlLCByZS5kZXRhaWxfdXJsLCAnIycpICAgICAgICAgICAgICBBUyB1cmwsXG4gICAgICAgIENBU0UgV0hFTiByYy5jaWQgfiAnXlswLTldKyQnIFRIRU4gKHJjLmNpZCk6OmRvdWJsZSBwcmVjaXNpb24gRUxTRSBOVUxMIEVORCBBUyBjYXRlZ29yeV9pZCxcbiAgICAgICAgQ09BTEVTQ0UocmUuc3RhdHVzLCAnTk9STUFMJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIHN0YXR1c1xuICAgICAgRlJPTSByZXNvdXJjZSByZVxuICAgICAgTEVGVCBKT0lOIHJsIE9OIHJsLnJlc291cmNlX2lkID0gcmUuaWRcbiAgICAgIExFRlQgSk9JTiByYyBPTiByYy5yaWQgPSByZS5pZFxuICAgICksXG4gICAgdTIgQVMgKFxuICAgICAgU0VMRUNUIHUuKiwgYy5uYW1lIEFTIGNhdGVnb3J5X25hbWVcbiAgICAgIEZST00gdVxuICAgICAgTEVGVCBKT0lOIGNhdGVnb3JpZXMgYyBPTiBjLmlkID0gdS5jYXRlZ29yeV9pZFxuICAgICksXG4gICAgcyBBUyAoXG4gICAgICBTRUxFQ1QgaWQsIHRpdGxlLCBjYXRlZ29yeV9uYW1lLCB1cmwsIHN0YXR1cywgQ09VTlQoKikgT1ZFUigpIEFTIHRvdGFsXG4gICAgICBGUk9NIHUyXG4gICAgICAke3doZXJlQ2xhdXNlfVxuICAgICAgT1JERVIgQlkgaWQgREVTQ1xuICAgIClcbiAgICBTRUxFQ1QgXG4gICAgICBpZCxcbiAgICAgIHRpdGxlLFxuICAgICAgY2F0ZWdvcnlfbmFtZSxcbiAgICAgIHN0YXR1cyxcbiAgICAgIENBU0UgXG4gICAgICAgIFdIRU4gdXJsIH4qICdeaHR0cHM/Oi8vJyBUSEVOICdodHRwczovL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP2RvbWFpbj0nIHx8IHJlZ2V4cF9yZXBsYWNlKHVybCwgJ14oPzpodHRwcz86XFxcXC9cXFxcLyk/KFteXFxcXC9cXFxcPyNdKykuKiQnLCAnXFxcXDEnKSB8fCAnJnN6PTY0J1xuICAgICAgICBFTFNFIE5VTExcbiAgICAgIEVORCBBUyBpY29uLFxuICAgICAgdG90YWxcbiAgICBGUk9NIHNcbiAgICBMSU1JVCAkJHtsaW1pdFBhcmFtfSBPRkZTRVQgJCR7b2Zmc2V0UGFyYW19XG4gICAgYCxcbiAgICBxdWVyeVBhcmFtc1xuICApO1xuXG4gIGxldCB0b3RhbDogbnVtYmVyO1xuICBpZiAoaXRlbXNSZXN1bHQucm93cy5sZW5ndGggPiAwKSB7XG4gICAgdG90YWwgPSBOdW1iZXIoaXRlbXNSZXN1bHQucm93c1swXS50b3RhbCk7XG4gIH0gZWxzZSB7XG4gICAgLy8g5p6E5bu657uf6K6h5p+l6K+i5p2h5Lu2XG4gICAgY29uc3QgY291bnRXaGVyZUNvbmRpdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgY291bnRQYXJhbXM6IHVua25vd25bXSA9IFtdO1xuICAgIFxuICAgIGlmIChxUmF3KSB7XG4gICAgICBjb3VudFdoZXJlQ29uZGl0aW9ucy5wdXNoKGAodGl0bGUgSUxJS0UgJCR7Y291bnRQYXJhbXMubGVuZ3RoICsgMX0gT1IgY2F0ZWdvcnlfbmFtZSBJTElLRSAkJHtjb3VudFBhcmFtcy5sZW5ndGggKyAxfSlgKTtcbiAgICAgIGNvdW50UGFyYW1zLnB1c2goYCUke3FSYXd9JWApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc3RhdHVzRmlsdGVyICYmIChzdGF0dXNGaWx0ZXIgPT09ICdOT1JNQUwnIHx8IHN0YXR1c0ZpbHRlciA9PT0gJ1ZPSUQnKSkge1xuICAgICAgY291bnRXaGVyZUNvbmRpdGlvbnMucHVzaChgc3RhdHVzID0gJCR7Y291bnRQYXJhbXMubGVuZ3RoICsgMX1gKTtcbiAgICAgIGNvdW50UGFyYW1zLnB1c2goc3RhdHVzRmlsdGVyKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY291bnRXaGVyZUNsYXVzZSA9IGNvdW50V2hlcmVDb25kaXRpb25zLmxlbmd0aCA+IDAgPyBgV0hFUkUgJHtjb3VudFdoZXJlQ29uZGl0aW9ucy5qb2luKCcgQU5EICcpfWAgOiBcIlwiO1xuICAgIFxuICAgIGNvbnN0IGNvdW50UmVzdWx0ID0gYXdhaXQgcnVuUXVlcnk8eyB0b3RhbDogc3RyaW5nIHwgbnVtYmVyIH0+KFxuICAgICAgZW52IGFzIHVua25vd24gYXMgRW52V2l0aEh5cGVyZHJpdmUsXG4gICAgICBgXG4gICAgICBXSVRIIHJsIEFTIChcbiAgICAgICAgU0VMRUNUIERJU1RJTkNUIE9OIChyZXNvdXJjZV9pZClcbiAgICAgICAgICByZXNvdXJjZV9pZCxcbiAgICAgICAgICBsaW5rXG4gICAgICAgIEZST00gcmVzb3VyY2VfbGlua1xuICAgICAgICBPUkRFUiBCWSByZXNvdXJjZV9pZCwgdXBkYXRlX3RpbWUgREVTQyBOVUxMUyBMQVNUXG4gICAgICApLFxuICAgICAgcmMgQVMgKFxuICAgICAgICBTRUxFQ1QgRElTVElOQ1QgT04gKHRyaW0ocmVzb3VyY2VfaWQpKVxuICAgICAgICAgIHRyaW0ocmVzb3VyY2VfaWQpIEFTIHJpZCxcbiAgICAgICAgICB0cmltKGNhdGVnb3J5X2lkKSBBUyBjaWRcbiAgICAgICAgRlJPTSByZXNvdXJjZV9jYXRlZ29yeVxuICAgICAgICBPUkRFUiBCWSB0cmltKHJlc291cmNlX2lkKSwgY3JlYXRlX3RpbWUgREVTQyBOVUxMUyBMQVNUXG4gICAgICApLFxuICAgICAgdSBBUyAoXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICByLmlkOjpkb3VibGUgcHJlY2lzaW9uICAgICAgICAgICAgQVMgaWQsXG4gICAgICAgICAgci50aXRsZSAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIHRpdGxlLFxuICAgICAgICAgIHIudXJsICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBUyB1cmwsXG4gICAgICAgICAgci5jYXRlZ29yeV9pZDo6ZG91YmxlIHByZWNpc2lvbiAgIEFTIGNhdGVnb3J5X2lkLFxuICAgICAgICAgIHIuc3RhdHVzICAgICAgICAgICAgICAgICAgICAgICAgICBBUyBzdGF0dXNcbiAgICAgICAgRlJPTSByZXNvdXJjZXMgclxuICAgICAgICBVTklPTiBBTExcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIChyZS5pZCk6OmRvdWJsZSBwcmVjaXNpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIGlkLFxuICAgICAgICAgIHJlLm5hbWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIHRpdGxlLFxuICAgICAgICAgIENPQUxFU0NFKHJsLmxpbmssIHJlLm9mZmljaWFsX3NpdGUsIHJlLmRldGFpbF91cmwsICcjJykgICAgICAgICAgICAgIEFTIHVybCxcbiAgICAgICAgICBDQVNFIFdIRU4gcmMuY2lkIH4gJ15bMC05XSskJyBUSEVOIChyYy5jaWQpOjpkb3VibGUgcHJlY2lzaW9uIEVMU0UgTlVMTCBFTkQgQVMgY2F0ZWdvcnlfaWQsXG4gICAgICAgICAgQ09BTEVTQ0UocmUuc3RhdHVzLCAnTk9STUFMJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTIHN0YXR1c1xuICAgICAgICBGUk9NIHJlc291cmNlIHJlXG4gICAgICAgIExFRlQgSk9JTiBybCBPTiBybC5yZXNvdXJjZV9pZCA9IHJlLmlkXG4gICAgICAgIExFRlQgSk9JTiByYyBPTiByYy5yaWQgPSByZS5pZFxuICAgICAgKSxcbiAgICAgIHUyIEFTIChcbiAgICAgICAgU0VMRUNUIHUuKiwgYy5uYW1lIEFTIGNhdGVnb3J5X25hbWVcbiAgICAgICAgRlJPTSB1XG4gICAgICAgIExFRlQgSk9JTiBjYXRlZ29yaWVzIGMgT04gYy5pZCA9IHUuY2F0ZWdvcnlfaWRcbiAgICAgIClcbiAgICAgIFNFTEVDVCBDT1VOVCgqKSBBUyB0b3RhbCBGUk9NIHUyXG4gICAgICAke2NvdW50V2hlcmVDbGF1c2V9XG4gICAgICBgLFxuICAgICAgY291bnRQYXJhbXNcbiAgICApO1xuICAgIHRvdGFsID0gTnVtYmVyKGNvdW50UmVzdWx0LnJvd3NbMF0/LnRvdGFsID8/IDApO1xuICB9XG5cbiAgY29uc3QgaXRlbXMgPSBpdGVtc1Jlc3VsdC5yb3dzLm1hcCgoeyB0b3RhbDogX3QsIC4uLnJvdyB9KSA9PiByb3cpO1xuICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGl0ZW1zLCB0b3RhbCwgcGFnZSwgcGFnZVNpemUsIHE6IHFSYXcsIHN0YXR1czogc3RhdHVzRmlsdGVyIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICBjb25zdCBwYXJzZWQgPSByZXNvdXJjZUNyZWF0ZVNjaGVtYS5zYWZlUGFyc2UoYm9keSk7XG4gIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBwYXJzZWQuZXJyb3IuZmxhdHRlbigpIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cbiAgY29uc3QgeyBlbnYgfSA9IGdldENsb3VkZmxhcmVDb250ZXh0KCk7XG4gIGNvbnN0IHsgdGl0bGUsIHVybCwgY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb24sIHN0YXR1cyB9ID0gcGFyc2VkLmRhdGE7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVuUXVlcnk8eyBpZDogbnVtYmVyIH0+KFxuICAgICAgZW52IGFzIHVua25vd24gYXMgRW52V2l0aEh5cGVyZHJpdmUsXG4gICAgICBgSU5TRVJUIElOVE8gcmVzb3VyY2VzKHRpdGxlLCB1cmwsIGNhdGVnb3J5X2lkLCBkZXNjcmlwdGlvbiwgc3RhdHVzKSBWQUxVRVMoJDEsICQyLCAkMywgJDQsICQ1KSBSRVRVUk5JTkcgaWRgLFxuICAgICAgW3RpdGxlLCB1cmwsIGNhdGVnb3J5SWQgPz8gbnVsbCwgZGVzY3JpcHRpb24gPz8gbnVsbCwgc3RhdHVzXVxuICAgICk7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBpZDogcmVzdWx0LnJvd3NbMF0uaWQgfSwgeyBzdGF0dXM6IDIwMSB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiBcIkZhaWxlZFwiO1xuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgZXJyb3I6IG1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gIGNvbnN0IHBhcnNlZCA9IHJlc291cmNlVXBkYXRlU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcbiAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgZXJyb3I6IHBhcnNlZC5lcnJvci5mbGF0dGVuKCkgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgfVxuICBjb25zdCB7IGlkLCB0aXRsZSwgdXJsLCBjYXRlZ29yeUlkLCBkZXNjcmlwdGlvbiwgc3RhdHVzIH0gPSBwYXJzZWQuZGF0YTtcbiAgY29uc3QgeyBlbnYgfSA9IGdldENsb3VkZmxhcmVDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgY29uc3QgZmllbGRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHZhbHVlczogdW5rbm93bltdID0gW107XG4gICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpZWxkcy5wdXNoKGB0aXRsZSA9ICQke2ZpZWxkcy5sZW5ndGggKyAxfWApO1xuICAgICAgdmFsdWVzLnB1c2godGl0bGUpO1xuICAgIH1cbiAgICBpZiAodXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpZWxkcy5wdXNoKGB1cmwgPSAkJHtmaWVsZHMubGVuZ3RoICsgMX1gKTtcbiAgICAgIHZhbHVlcy5wdXNoKHVybCk7XG4gICAgfVxuICAgIGlmIChjYXRlZ29yeUlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpZWxkcy5wdXNoKGBjYXRlZ29yeV9pZCA9ICQke2ZpZWxkcy5sZW5ndGggKyAxfWApO1xuICAgICAgdmFsdWVzLnB1c2goY2F0ZWdvcnlJZCk7XG4gICAgfVxuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaWVsZHMucHVzaChgZGVzY3JpcHRpb24gPSAkJHtmaWVsZHMubGVuZ3RoICsgMX1gKTtcbiAgICAgIHZhbHVlcy5wdXNoKGRlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaWVsZHMucHVzaChgc3RhdHVzID0gJCR7ZmllbGRzLmxlbmd0aCArIDF9YCk7XG4gICAgICB2YWx1ZXMucHVzaChzdGF0dXMpO1xuICAgIH1cbiAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBvazogdHJ1ZSB9KTtcbiAgICB2YWx1ZXMucHVzaChpZCk7XG4gICAgYXdhaXQgcnVuUXVlcnkoXG4gICAgICBlbnYgYXMgdW5rbm93biBhcyBFbnZXaXRoSHlwZXJkcml2ZSxcbiAgICAgIGBVUERBVEUgcmVzb3VyY2VzIFNFVCAke2ZpZWxkcy5qb2luKFwiLCBcIil9LCB1cGRhdGVkX2F0ID0gbm93KCkgV0hFUkUgaWQgPSAkJHt2YWx1ZXMubGVuZ3RofWAsXG4gICAgICB2YWx1ZXNcbiAgICApO1xuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgb2s6IHRydWUgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogXCJGYWlsZWRcIjtcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBtZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpO1xuICBjb25zdCBpZCA9IE51bWJlcihzZWFyY2hQYXJhbXMuZ2V0KFwiaWRcIikpO1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIoaWQpIHx8IGlkIDw9IDApIHtcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcImludmFsaWQgaWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICB9XG4gIGNvbnN0IHsgZW52IH0gPSBnZXRDbG91ZGZsYXJlQ29udGV4dCgpO1xuICB0cnkge1xuICAgIGF3YWl0IHJ1blF1ZXJ5KGVudiBhcyB1bmtub3duIGFzIEVudldpdGhIeXBlcmRyaXZlLCBgREVMRVRFIEZST00gcmVzb3VyY2VzIFdIRVJFIGlkID0gJDFgLCBbaWRdKTtcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IG9rOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6IFwiRmFpbGVkXCI7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogbWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cblxuIl0sIm5hbWVzIjpbImdldENsb3VkZmxhcmVDb250ZXh0IiwicnVuUXVlcnkiLCJyZXNvdXJjZUNyZWF0ZVNjaGVtYSIsInJlc291cmNlVXBkYXRlU2NoZW1hIiwiR0VUIiwicmVxIiwiZW52Iiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInBhZ2VQYXJhbSIsIk51bWJlciIsImdldCIsInBhZ2VTaXplUGFyYW0iLCJxUmF3IiwidHJpbSIsInN0YXR1c0ZpbHRlciIsInBhZ2UiLCJpc0Zpbml0ZSIsIk1hdGgiLCJmbG9vciIsInBhZ2VTaXplIiwibWluIiwib2Zmc2V0IiwiaWRQYXJhbSIsImlzSW50ZWdlciIsImRldGFpbCIsInJvdyIsInJvd3MiLCJSZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJ3aGVyZUNvbmRpdGlvbnMiLCJxdWVyeVBhcmFtcyIsInB1c2giLCJsZW5ndGgiLCJ3aGVyZUNsYXVzZSIsImpvaW4iLCJsaW1pdFBhcmFtIiwib2Zmc2V0UGFyYW0iLCJpdGVtc1Jlc3VsdCIsInRvdGFsIiwiY291bnRXaGVyZUNvbmRpdGlvbnMiLCJjb3VudFBhcmFtcyIsImNvdW50V2hlcmVDbGF1c2UiLCJjb3VudFJlc3VsdCIsIml0ZW1zIiwibWFwIiwiX3QiLCJxIiwiUE9TVCIsImJvZHkiLCJjYXRjaCIsInBhcnNlZCIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJlcnJvciIsImZsYXR0ZW4iLCJ0aXRsZSIsInVybCIsImNhdGVnb3J5SWQiLCJkZXNjcmlwdGlvbiIsImRhdGEiLCJyZXN1bHQiLCJpZCIsImUiLCJtZXNzYWdlIiwiRXJyb3IiLCJQVVQiLCJmaWVsZHMiLCJ2YWx1ZXMiLCJ1bmRlZmluZWQiLCJvayIsIkRFTEVURSIsIlVSTCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/resources/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/db.ts":
/*!**************************!*\
  !*** ./src/server/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureSchema: () => (/* binding */ ensureSchema),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   runQuery: () => (/* binding */ runQuery),\n/* harmony export */   withClient: () => (/* binding */ withClient)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nfunction getPoolsRegistry() {\n    if (!globalThis.__pgPools) {\n        globalThis.__pgPools = new Map();\n    }\n    return globalThis.__pgPools;\n}\nfunction getSchemaInitRegistry() {\n    if (!globalThis.__schemaInitializedForDsn) {\n        globalThis.__schemaInitializedForDsn = new Set();\n    }\n    return globalThis.__schemaInitializedForDsn;\n}\nfunction getPool(env) {\n    const dsn = env.HYPERDRIVE.connectionString;\n    const registry = getPoolsRegistry();\n    let pool = registry.get(dsn);\n    if (!pool) {\n        pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n            connectionString: dsn,\n            max: 5\n        });\n        registry.set(dsn, pool);\n    }\n    return pool;\n}\nasync function ensureSchema(env) {\n    const dsn = env.HYPERDRIVE.connectionString;\n    const initRegistry = getSchemaInitRegistry();\n    if (initRegistry.has(dsn)) return;\n    const pool = getPool(env);\n    const client = await pool.connect();\n    try {\n        await client.query(\"BEGIN\");\n        // 防并发初始化，事务级建议锁\n        await client.query(\"SELECT pg_advisory_xact_lock($1)\", [\n            708201002\n        ]);\n        // categories 表与序列（避免 SERIAL 并发创建序列的冲突）\n        await client.query(`\n      CREATE TABLE IF NOT EXISTS categories (\n        id INTEGER PRIMARY KEY,\n        name TEXT NOT NULL UNIQUE,\n        description TEXT,\n        created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n        updated_at TIMESTAMPTZ NOT NULL DEFAULT now()\n      );\n    `);\n        await client.query(`CREATE SEQUENCE IF NOT EXISTS categories_id_seq;`);\n        await client.query(`ALTER TABLE categories ALTER COLUMN id SET DEFAULT nextval('categories_id_seq');`);\n        await client.query(`ALTER SEQUENCE categories_id_seq OWNED BY categories.id;`);\n        // resources 表与序列\n        await client.query(`\n      CREATE TABLE IF NOT EXISTS resources (\n        id INTEGER PRIMARY KEY,\n        title TEXT NOT NULL,\n        url TEXT NOT NULL,\n        category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL,\n        description TEXT,\n        created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n        updated_at TIMESTAMPTZ NOT NULL DEFAULT now()\n      );\n    `);\n        await client.query(`CREATE SEQUENCE IF NOT EXISTS resources_id_seq;`);\n        await client.query(`ALTER TABLE resources ALTER COLUMN id SET DEFAULT nextval('resources_id_seq');`);\n        await client.query(`ALTER SEQUENCE resources_id_seq OWNED BY resources.id;`);\n        await client.query(`CREATE INDEX IF NOT EXISTS idx_resources_category_id ON resources(category_id);`);\n        await client.query(\"COMMIT\");\n        initRegistry.add(dsn);\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        throw error;\n    } finally{\n        client.release();\n    }\n}\nasync function runQuery(env, text, params = []) {\n    await ensureSchema(env);\n    const pool = getPool(env);\n    return pool.query(text, params);\n}\nasync function withClient(env, fn) {\n    await ensureSchema(env);\n    const pool = getPool(env);\n    const client = await pool.connect();\n    try {\n        return await fn(client);\n    } finally{\n        client.release();\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmMvc2VydmVyL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvb2wsIFBvb2xDbGllbnQsIFF1ZXJ5UmVzdWx0LCBRdWVyeVJlc3VsdFJvdyB9IGZyb20gXCJwZ1wiO1xuXG5leHBvcnQgdHlwZSBFbnZXaXRoSHlwZXJkcml2ZSA9IHtcbiAgSFlQRVJEUklWRTogeyBjb25uZWN0aW9uU3RyaW5nOiBzdHJpbmcgfTtcbn07XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICB2YXIgX19wZ1Bvb2xzOiBNYXA8c3RyaW5nLCBQb29sPiB8IHVuZGVmaW5lZDtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICB2YXIgX19zY2hlbWFJbml0aWFsaXplZEZvckRzbjogU2V0PHN0cmluZz4gfCB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGdldFBvb2xzUmVnaXN0cnkoKTogTWFwPHN0cmluZywgUG9vbD4ge1xuICBpZiAoIWdsb2JhbFRoaXMuX19wZ1Bvb2xzKSB7XG4gICAgZ2xvYmFsVGhpcy5fX3BnUG9vbHMgPSBuZXcgTWFwPHN0cmluZywgUG9vbD4oKTtcbiAgfVxuICByZXR1cm4gZ2xvYmFsVGhpcy5fX3BnUG9vbHM7XG59XG5cbmZ1bmN0aW9uIGdldFNjaGVtYUluaXRSZWdpc3RyeSgpOiBTZXQ8c3RyaW5nPiB7XG4gIGlmICghZ2xvYmFsVGhpcy5fX3NjaGVtYUluaXRpYWxpemVkRm9yRHNuKSB7XG4gICAgZ2xvYmFsVGhpcy5fX3NjaGVtYUluaXRpYWxpemVkRm9yRHNuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIH1cbiAgcmV0dXJuIGdsb2JhbFRoaXMuX19zY2hlbWFJbml0aWFsaXplZEZvckRzbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvb2woZW52OiBFbnZXaXRoSHlwZXJkcml2ZSk6IFBvb2wge1xuICBjb25zdCBkc24gPSBlbnYuSFlQRVJEUklWRS5jb25uZWN0aW9uU3RyaW5nO1xuICBjb25zdCByZWdpc3RyeSA9IGdldFBvb2xzUmVnaXN0cnkoKTtcbiAgbGV0IHBvb2wgPSByZWdpc3RyeS5nZXQoZHNuKTtcbiAgaWYgKCFwb29sKSB7XG4gICAgcG9vbCA9IG5ldyBQb29sKHsgY29ubmVjdGlvblN0cmluZzogZHNuLCBtYXg6IDUgfSk7XG4gICAgcmVnaXN0cnkuc2V0KGRzbiwgcG9vbCk7XG4gIH1cbiAgcmV0dXJuIHBvb2w7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVTY2hlbWEoZW52OiBFbnZXaXRoSHlwZXJkcml2ZSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBkc24gPSBlbnYuSFlQRVJEUklWRS5jb25uZWN0aW9uU3RyaW5nO1xuICBjb25zdCBpbml0UmVnaXN0cnkgPSBnZXRTY2hlbWFJbml0UmVnaXN0cnkoKTtcbiAgaWYgKGluaXRSZWdpc3RyeS5oYXMoZHNuKSkgcmV0dXJuO1xuXG4gIGNvbnN0IHBvb2wgPSBnZXRQb29sKGVudik7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcIkJFR0lOXCIpO1xuICAgIC8vIOmYsuW5tuWPkeWIneWni+WMlu+8jOS6i+WKoee6p+W7uuiurumUgVxuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcIlNFTEVDVCBwZ19hZHZpc29yeV94YWN0X2xvY2soJDEpXCIsIFs3MDgyMDEwMDJdKTtcblxuICAgIC8vIGNhdGVnb3JpZXMg6KGo5LiO5bqP5YiX77yI6YG/5YWNIFNFUklBTCDlubblj5HliJvlu7rluo/liJfnmoTlhrLnqoHvvIlcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2F0ZWdvcmllcyAoXG4gICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVksXG4gICAgICAgIG5hbWUgVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QVFogTk9UIE5VTEwgREVGQVVMVCBub3coKSxcbiAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVBUWiBOT1QgTlVMTCBERUZBVUxUIG5vdygpXG4gICAgICApO1xuICAgIGApO1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeShgQ1JFQVRFIFNFUVVFTkNFIElGIE5PVCBFWElTVFMgY2F0ZWdvcmllc19pZF9zZXE7YCk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFxuICAgICAgYEFMVEVSIFRBQkxFIGNhdGVnb3JpZXMgQUxURVIgQ09MVU1OIGlkIFNFVCBERUZBVUxUIG5leHR2YWwoJ2NhdGVnb3JpZXNfaWRfc2VxJyk7YFxuICAgICk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFxuICAgICAgYEFMVEVSIFNFUVVFTkNFIGNhdGVnb3JpZXNfaWRfc2VxIE9XTkVEIEJZIGNhdGVnb3JpZXMuaWQ7YFxuICAgICk7XG5cbiAgICAvLyByZXNvdXJjZXMg6KGo5LiO5bqP5YiXXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHJlc291cmNlcyAoXG4gICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVksXG4gICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIHVybCBURVhUIE5PVCBOVUxMLFxuICAgICAgICBjYXRlZ29yeV9pZCBJTlRFR0VSIFJFRkVSRU5DRVMgY2F0ZWdvcmllcyhpZCkgT04gREVMRVRFIFNFVCBOVUxMLFxuICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUFRaIE5PVCBOVUxMIERFRkFVTFQgbm93KCksXG4gICAgICAgIHVwZGF0ZWRfYXQgVElNRVNUQU1QVFogTk9UIE5VTEwgREVGQVVMVCBub3coKVxuICAgICAgKTtcbiAgICBgKTtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoYENSRUFURSBTRVFVRU5DRSBJRiBOT1QgRVhJU1RTIHJlc291cmNlc19pZF9zZXE7YCk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFxuICAgICAgYEFMVEVSIFRBQkxFIHJlc291cmNlcyBBTFRFUiBDT0xVTU4gaWQgU0VUIERFRkFVTFQgbmV4dHZhbCgncmVzb3VyY2VzX2lkX3NlcScpO2BcbiAgICApO1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgIGBBTFRFUiBTRVFVRU5DRSByZXNvdXJjZXNfaWRfc2VxIE9XTkVEIEJZIHJlc291cmNlcy5pZDtgXG4gICAgKTtcblxuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgIGBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfcmVzb3VyY2VzX2NhdGVnb3J5X2lkIE9OIHJlc291cmNlcyhjYXRlZ29yeV9pZCk7YFxuICAgICk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFwiQ09NTUlUXCIpO1xuICAgIGluaXRSZWdpc3RyeS5hZGQoZHNuKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJST0xMQkFDS1wiKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5RdWVyeTxUIGV4dGVuZHMgUXVlcnlSZXN1bHRSb3cgPSBRdWVyeVJlc3VsdFJvdz4oXG4gIGVudjogRW52V2l0aEh5cGVyZHJpdmUsXG4gIHRleHQ6IHN0cmluZyxcbiAgcGFyYW1zOiB1bmtub3duW10gPSBbXVxuKTogUHJvbWlzZTxRdWVyeVJlc3VsdDxUPj4ge1xuICBhd2FpdCBlbnN1cmVTY2hlbWEoZW52KTtcbiAgY29uc3QgcG9vbCA9IGdldFBvb2woZW52KTtcbiAgcmV0dXJuIHBvb2wucXVlcnk8VD4odGV4dCwgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhDbGllbnQ8Uj4oXG4gIGVudjogRW52V2l0aEh5cGVyZHJpdmUsXG4gIGZuOiAoY2xpZW50OiBQb29sQ2xpZW50KSA9PiBQcm9taXNlPFI+XG4pOiBQcm9taXNlPFI+IHtcbiAgYXdhaXQgZW5zdXJlU2NoZW1hKGVudik7XG4gIGNvbnN0IHBvb2wgPSBnZXRQb29sKGVudik7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBmbihjbGllbnQpO1xuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gIH1cbn1cblxuXG4iXSwibmFtZXMiOlsiUG9vbCIsImdldFBvb2xzUmVnaXN0cnkiLCJnbG9iYWxUaGlzIiwiX19wZ1Bvb2xzIiwiTWFwIiwiZ2V0U2NoZW1hSW5pdFJlZ2lzdHJ5IiwiX19zY2hlbWFJbml0aWFsaXplZEZvckRzbiIsIlNldCIsImdldFBvb2wiLCJlbnYiLCJkc24iLCJIWVBFUkRSSVZFIiwiY29ubmVjdGlvblN0cmluZyIsInJlZ2lzdHJ5IiwicG9vbCIsImdldCIsIm1heCIsInNldCIsImVuc3VyZVNjaGVtYSIsImluaXRSZWdpc3RyeSIsImhhcyIsImNsaWVudCIsImNvbm5lY3QiLCJxdWVyeSIsImFkZCIsImVycm9yIiwicmVsZWFzZSIsInJ1blF1ZXJ5IiwidGV4dCIsInBhcmFtcyIsIndpdGhDbGllbnQiLCJmbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/validators.ts":
/*!**********************************!*\
  !*** ./src/server/validators.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   categoryCreateSchema: () => (/* binding */ categoryCreateSchema),\n/* harmony export */   categoryUpdateSchema: () => (/* binding */ categoryUpdateSchema),\n/* harmony export */   resourceCreateSchema: () => (/* binding */ resourceCreateSchema),\n/* harmony export */   resourceUpdateSchema: () => (/* binding */ resourceUpdateSchema),\n/* harmony export */   statusEnum: () => (/* binding */ statusEnum)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n// 状态枚举：NORMAL正常，VOID下架\nconst statusEnum = zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n    \"NORMAL\",\n    \"VOID\"\n]);\nconst categoryCreateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).max(100),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.string().max(1000).optional().nullable(),\n    status: statusEnum.optional().default(\"NORMAL\")\n});\nconst categoryUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().int().positive(),\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).max(100).optional(),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.string().max(1000).optional().nullable(),\n    status: statusEnum.optional()\n});\nconst resourceCreateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).max(200),\n    url: zod__WEBPACK_IMPORTED_MODULE_0__.string().url(),\n    categoryId: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().int().positive().optional().nullable(),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.string().max(2000).optional().nullable(),\n    status: statusEnum.optional().default(\"NORMAL\")\n});\nconst resourceUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().int().positive(),\n    title: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).max(200).optional(),\n    url: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().optional(),\n    categoryId: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().int().positive().optional().nullable(),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.string().max(2000).optional().nullable(),\n    status: statusEnum.optional()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3ZhbGlkYXRvcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdCO0FBRXhCLHVCQUF1QjtBQUNoQixNQUFNQyxhQUFhRCx3Q0FBTSxDQUFDO0lBQUM7SUFBVTtDQUFPLEVBQUU7QUFFOUMsTUFBTUcsdUJBQXVCSCx1Q0FBUSxDQUFDO0lBQzNDSyxNQUFNTCx1Q0FBUSxHQUFHTyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDO0lBQzVCQyxhQUFhVCx1Q0FBUSxHQUFHUSxHQUFHLENBQUMsTUFBTUUsUUFBUSxHQUFHQyxRQUFRO0lBQ3JEQyxRQUFRWCxXQUFXUyxRQUFRLEdBQUdHLE9BQU8sQ0FBQztBQUN4QyxHQUFHO0FBRUksTUFBTUMsdUJBQXVCZCx1Q0FBUSxDQUFDO0lBQzNDZSxJQUFJZiw4Q0FBZSxHQUFHa0IsR0FBRyxHQUFHQyxRQUFRO0lBQ3BDZCxNQUFNTCx1Q0FBUSxHQUFHTyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDLEtBQUtFLFFBQVE7SUFDekNELGFBQWFULHVDQUFRLEdBQUdRLEdBQUcsQ0FBQyxNQUFNRSxRQUFRLEdBQUdDLFFBQVE7SUFDckRDLFFBQVFYLFdBQVdTLFFBQVE7QUFDN0IsR0FBRztBQUVJLE1BQU1VLHVCQUF1QnBCLHVDQUFRLENBQUM7SUFDM0NxQixPQUFPckIsdUNBQVEsR0FBR08sR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQztJQUM3QmMsS0FBS3RCLHVDQUFRLEdBQUdzQixHQUFHO0lBQ25CQyxZQUFZdkIsOENBQWUsR0FBR2tCLEdBQUcsR0FBR0MsUUFBUSxHQUFHVCxRQUFRLEdBQUdDLFFBQVE7SUFDbEVGLGFBQWFULHVDQUFRLEdBQUdRLEdBQUcsQ0FBQyxNQUFNRSxRQUFRLEdBQUdDLFFBQVE7SUFDckRDLFFBQVFYLFdBQVdTLFFBQVEsR0FBR0csT0FBTyxDQUFDO0FBQ3hDLEdBQUc7QUFFSSxNQUFNVyx1QkFBdUJ4Qix1Q0FBUSxDQUFDO0lBQzNDZSxJQUFJZiw4Q0FBZSxHQUFHa0IsR0FBRyxHQUFHQyxRQUFRO0lBQ3BDRSxPQUFPckIsdUNBQVEsR0FBR08sR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQyxLQUFLRSxRQUFRO0lBQzFDWSxLQUFLdEIsdUNBQVEsR0FBR3NCLEdBQUcsR0FBR1osUUFBUTtJQUM5QmEsWUFBWXZCLDhDQUFlLEdBQUdrQixHQUFHLEdBQUdDLFFBQVEsR0FBR1QsUUFBUSxHQUFHQyxRQUFRO0lBQ2xFRixhQUFhVCx1Q0FBUSxHQUFHUSxHQUFHLENBQUMsTUFBTUUsUUFBUSxHQUFHQyxRQUFRO0lBQ3JEQyxRQUFRWCxXQUFXUyxRQUFRO0FBQzdCLEdBQUciLCJzb3VyY2VzIjpbIi9Vc2Vycy90aW5rL0Rlc2t0b3AvVGlua1Byb2plY3QvbWFjYXBwLWFkbWluL3NyYy9zZXJ2ZXIvdmFsaWRhdG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG4vLyDnirbmgIHmnprkuL7vvJpOT1JNQUzmraPluLjvvIxWT0lE5LiL5p62XG5leHBvcnQgY29uc3Qgc3RhdHVzRW51bSA9IHouZW51bShbXCJOT1JNQUxcIiwgXCJWT0lEXCJdKTtcblxuZXhwb3J0IGNvbnN0IGNhdGVnb3J5Q3JlYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxKS5tYXgoMTAwKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDEwMDApLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgc3RhdHVzOiBzdGF0dXNFbnVtLm9wdGlvbmFsKCkuZGVmYXVsdChcIk5PUk1BTFwiKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgY2F0ZWdvcnlVcGRhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LmNvZXJjZS5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpLFxuICBuYW1lOiB6LnN0cmluZygpLm1pbigxKS5tYXgoMTAwKS5vcHRpb25hbCgpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoMTAwMCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBzdGF0dXM6IHN0YXR1c0VudW0ub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcmVzb3VyY2VDcmVhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRpdGxlOiB6LnN0cmluZygpLm1pbigxKS5tYXgoMjAwKSxcbiAgdXJsOiB6LnN0cmluZygpLnVybCgpLFxuICBjYXRlZ29yeUlkOiB6LmNvZXJjZS5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDIwMDApLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgc3RhdHVzOiBzdGF0dXNFbnVtLm9wdGlvbmFsKCkuZGVmYXVsdChcIk5PUk1BTFwiKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcmVzb3VyY2VVcGRhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LmNvZXJjZS5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpLFxuICB0aXRsZTogei5zdHJpbmcoKS5taW4oMSkubWF4KDIwMCkub3B0aW9uYWwoKSxcbiAgdXJsOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCksXG4gIGNhdGVnb3J5SWQ6IHouY29lcmNlLm51bWJlcigpLmludCgpLnBvc2l0aXZlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoMjAwMCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBzdGF0dXM6IHN0YXR1c0VudW0ub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBDYXRlZ29yeUNyZWF0ZUlucHV0ID0gei5pbmZlcjx0eXBlb2YgY2F0ZWdvcnlDcmVhdGVTY2hlbWE+O1xuZXhwb3J0IHR5cGUgQ2F0ZWdvcnlVcGRhdGVJbnB1dCA9IHouaW5mZXI8dHlwZW9mIGNhdGVnb3J5VXBkYXRlU2NoZW1hPjtcbmV4cG9ydCB0eXBlIFJlc291cmNlQ3JlYXRlSW5wdXQgPSB6LmluZmVyPHR5cGVvZiByZXNvdXJjZUNyZWF0ZVNjaGVtYT47XG5leHBvcnQgdHlwZSBSZXNvdXJjZVVwZGF0ZUlucHV0ID0gei5pbmZlcjx0eXBlb2YgcmVzb3VyY2VVcGRhdGVTY2hlbWE+O1xuXG5cbiJdLCJuYW1lcyI6WyJ6Iiwic3RhdHVzRW51bSIsImVudW0iLCJjYXRlZ29yeUNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsIm5hbWUiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwibnVsbGFibGUiLCJzdGF0dXMiLCJkZWZhdWx0IiwiY2F0ZWdvcnlVcGRhdGVTY2hlbWEiLCJpZCIsImNvZXJjZSIsIm51bWJlciIsImludCIsInBvc2l0aXZlIiwicmVzb3VyY2VDcmVhdGVTY2hlbWEiLCJ0aXRsZSIsInVybCIsImNhdGVnb3J5SWQiLCJyZXNvdXJjZVVwZGF0ZVNjaGVtYSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/validators.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/@opennextjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fresources%2Froute&page=%2Fapi%2Fresources%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresources%2Froute.ts&appDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftink%2FDesktop%2FTinkProject%2Fmacapp-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();